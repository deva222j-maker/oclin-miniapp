<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Oclon.bot</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Tajawal',sans-serif;}

html,body{
height:100%;
overflow:hidden;
background:#0a0e17;
}

.app{
width:100%;
height:100vh;
max-width:500px;
margin:auto;
display:flex;
flex-direction:column;
background:linear-gradient(180deg,#12182b 0%,#1a2340 100%);
position:relative;
overflow:hidden;
}

/* -- Splash Screen Styles -- */
.splash-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #1a1f2f, #0b0e1a);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 100;
    transition: opacity 0.5s ease-out;
    pointer-events: none;
}
.splash-screen.hidden {
    opacity: 0;
}
.splash-content {
    text-align: center;
    color: white;
}
.splash-content h1 {
    font-size: 42px;
    font-weight: 800;
    background: linear-gradient(135deg,#ffffff,#b886ff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    margin-bottom: 20px;
}
.splash-content p {
    color: #a5b3d9;
    font-size: 18px;
}
/* ------------------------- */

.header{
padding:15px;
text-align:center;
flex-shrink:0;
}

.title{
font-size:26px;
font-weight:800;
background:linear-gradient(135deg,#ffffff,#b886ff);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.main-content{
flex:1;
overflow-y:auto;
padding:10px 15px 90px 15px;
scrollbar-width:none;
}
.main-content::-webkit-scrollbar{display:none;}

.welcome-message{
text-align:center;
color:#a5b3d9;
margin-bottom:20px;
font-size:14px;
}

.coins-title{
color:#fff;
font-size:18px;
font-weight:700;
margin-bottom:15px;
}

.coins-grid{
display:flex;
flex-direction:column;
gap:12px;
}

/* ØªÙ†Ø³ÙŠÙ‚ Ø­Ø§ÙˆÙŠØ© ÙƒÙ„ Ø¹Ù…Ù„Ø© Ù…Ø¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ø§ */
.coin-vote-container {
    display: flex;
    flex-direction: column;
    background: rgba(255,255,255,0.02);
    border-radius: 25px;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.coin-vote-container.selected {
    border-color: #ffd966;
    background: rgba(255,215,0,0.1);
    transform: scale(1.02);
    margin: 5px 0;
}

.coin-card {
    background: transparent;
    border-radius: 20px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: .3s;
}

.coin-card.voted {
    opacity: .6;
    pointer-events: none;
}

.coin-card.disabled {
    opacity: .6;
    pointer-events: none;
}

.coin-icon{
width:45px;
height:45px;
border-radius:50%;
overflow:hidden;
flex-shrink:0;
}

.coin-icon img{
width:100%;
height:100%;
}

.coin-name{
font-weight:700;
color:#fff;
}

.coin-symbol{
font-size:13px;
color:#a5b3d9;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙˆÙŠØª - ØªØ¸Ù‡Ø± ØªØ­Øª ÙƒÙ„ Ø¹Ù…Ù„Ø© Ù…Ø­Ø¯Ø¯Ø© */
.vote-options {
    display: none;
    justify-content: center;
    gap: 20px;
    padding: 0 15px 15px 15px;
    width: 100%;
}

.vote-options.show {
    display: flex;
}

.vote-btn{
padding:10px 20px;
border-radius:50px;
font-weight:700;
cursor:pointer;
border:2px solid;
background:rgba(10,15,30,0.9);
font-size:14px;
}

.vote-up{
border-color:#2ecc71;
color:#2ecc71;
}
.vote-down{
border-color:#e74c3c;
color:#e74c3c;
}

.vote-btn.disabled {
    opacity: 0.5;
    pointer-events: none;
}

/* ---- Profile Page Styles ---- */
.profile-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 30px;
    padding: 25px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.profile-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #8B5CF6, #EC4899);
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    color: white;
}

.profile-name {
    color: white;
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 5px;
}

.profile-username {
    color: #8B5CF6;
    font-size: 14px;
    margin-bottom: 20px;
}

.profile-balance {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
}

.balance-label {
    color: #a5b3d9;
    font-size: 14px;
    margin-bottom: 5px;
}

.balance-amount {
    color: white;
    font-size: 32px;
    font-weight: 800;
}

.balance-amount span {
    font-size: 16px;
    color: #8B5CF6;
    margin-left: 5px;
}

.profile-actions {
    display: flex;
    gap: 15px;
}

.profile-action-btn {
    flex: 1;
    padding: 15px;
    border-radius: 20px;
    border: none;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: 0.3s;
    background: rgba(255, 255, 255, 0.03);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.profile-action-btn.primary {
    background: linear-gradient(135deg, #8B5CF6, #EC4899);
    border: none;
}

.profile-action-btn:hover {
    transform: translateY(-2px);
}
/* -------------------------------------------- */

/* ---- Referral Page Styles ---- */
.referral-container {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 30px;
    padding: 25px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.referral-title {
    color: white;
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 10px;
    text-align: center;
}

.referral-desc {
    color: #a5b3d9;
    font-size: 14px;
    text-align: center;
    margin-bottom: 25px;
    line-height: 1.5;
}

.referral-link-box {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
}

.referral-link-box input {
    flex: 1;
    padding: 15px;
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.03);
    color: white;
    font-size: 14px;
    direction: ltr;
}

.referral-link-box button {
    padding: 15px 25px;
    border-radius: 20px;
    border: none;
    background: linear-gradient(135deg, #8B5CF6, #EC4899);
    color: white;
    font-weight: 700;
    cursor: pointer;
    transition: 0.3s;
}

.referral-link-box button:hover {
    transform: scale(0.95);
}

.referral-stats-grid {
    display: flex;
    gap: 15px;
}

.referral-stat-item {
    flex: 1;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    padding: 20px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.referral-stat-number {
    color: white;
    font-size: 36px;
    font-weight: 800;
    margin-bottom: 5px;
}

.referral-stat-label {
    color: #a5b3d9;
    font-size: 14px;
}
/* -------------------------------------------- */

/* ---- Tasks Page Styles ---- */
.tasks-container {
    padding: 15px;
}

.tasks-section-title {
    color: white;
    font-size: 20px;
    font-weight: 700;
    margin: 20px 0 15px 0;
}

.social-links-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 25px;
}

.social-link-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 20px 15px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: 0.3s;
}

.social-link-card:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.1);
}

.social-link-card.completed {
    opacity: 0.6;
    border-color: #2ecc71;
}

.social-icon {
    font-size: 32px;
    margin-bottom: 10px;
}

.social-name {
    color: white;
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 5px;
}

.social-username {
    color: #8B5CF6;
    font-size: 12px;
}

.social-reward {
    color: #2ecc71;
    font-size: 12px;
    margin-top: 8px;
    font-weight: 700;
}

.posts-grid {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 20px;
}

.post-card {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.post-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.post-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #8B5CF6, #EC4899);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.post-info {
    flex: 1;
}

.post-platform {
    color: white;
    font-weight: 700;
    font-size: 14px;
}

.post-time {
    color: #a5b3d9;
    font-size: 12px;
}

.post-content {
    color: white;
    font-size: 14px;
    margin-bottom: 15px;
    line-height: 1.5;
    padding-right: 52px;
}

.post-actions {
    display: flex;
    gap: 15px;
    padding-right: 52px;
}

.post-action-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 13px;
    cursor: pointer;
    transition: 0.3s;
}

.post-action-btn:hover {
    background: rgba(139, 92, 246, 0.3);
}

.post-action-btn.completed {
    background: #2ecc71;
    border-color: #2ecc71;
    pointer-events: none;
}
/* -------------------------------------------- */

/* ---- Bottom Nav Glassmorphism ---- */
.bottom-nav {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    display: flex;
    justify-content: space-around;
    background: rgba(20, 25, 40, 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding: 12px;
    border-radius: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.nav-item {
    color: #a5b3d9;
    text-align: center;
    cursor: pointer;
    font-size: 20px;
    transition: 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.nav-item span {
    font-size: 12px;
    font-weight: 500;
}

.nav-item.active {
    color: #8B5CF6;
    transform: translateY(-2px);
}

.nav-item.active span {
    color: #8B5CF6;
}
/* --------------------------------- */

.toast{
position:absolute;
bottom:100px;
left:50%;
transform:translateX(-50%);
background:#2ecc71;
color:#fff;
padding:10px 25px;
border-radius:50px;
opacity:0;
transition:.3s;
z-index: 200;
}

.toast.show{
opacity:1;
}

.hidden{display:none;}
</style>
</head>
<body>

<div class="app">

    <!-- splash screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <h1>OCLIN BOT</h1>
            <p id="splashMessage">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
        </div>
    </div>

<div class="header">
<div class="title">OCLIN</div>
</div>

<div class="main-content">

<!-- HOME -->
<div id="homePage">
<div class="welcome-message">ğŸ‘‹ Ø§Ø®ØªØ± Ø¹Ù…Ù„Ø© Ù„Ù„ØªØµÙˆÙŠØª <span id="votesCounter" style="color: #ffd966; font-weight: bold;">(5/5)</span></div>

<div class="coins-title">ğŸ“Š Ø¹Ù…Ù„Ø§Øª Solana Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
<div class="coins-grid" id="coinsGrid"></div>

</div>

<!-- PROFILE -->
<div id="profilePage" class="hidden">
<div class="profile-card">
    <div class="profile-avatar">ğŸ‘¤</div>
    <div class="profile-name" id="profileDisplayName">Random User</div>
    <div class="profile-username" id="profileUsername">@random_user</div>
    
    <div class="profile-balance">
        <div class="balance-label">Ø§Ù„Ø±ØµÙŠØ¯</div>
        <div class="balance-amount">
            <span id="profileBalance">0</span> <span>USD</span>
        </div>
    </div>
    
    <div class="profile-actions">
        <button class="profile-action-btn" onclick="showToast('Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©')">Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©</button>
        <button class="profile-action-btn primary" onclick="showToast('Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ø§Ù„Ø³Ø­Ø¨')">Ø³Ø­Ø¨</button>
    </div>
</div>
</div>

<!-- REFERRAL -->
<div id="referralPage" class="hidden">
<div class="referral-container">
    <h2 class="referral-title">ğŸ Ø¯Ø¹ÙˆØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</h2>
    <p class="referral-desc">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ 5 Ù†Ù‚Ø§Ø· Ø¹Ù† ÙƒÙ„ ØµØ¯ÙŠÙ‚ ÙŠÙ†Ø¶Ù… Ø¹Ø¨Ø± Ø±Ø§Ø¨Ø·Ùƒ</p>
    
    <div class="referral-link-box">
        <input type="text" id="referralLink" readonly>
        <button onclick="copyReferralLink()">Ù†Ø³Ø®</button>
    </div>
    
    <div class="referral-stats-grid">
        <div class="referral-stat-item">
            <div class="referral-stat-number" id="totalReferrals">0</div>
            <div class="referral-stat-label">Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</div>
        </div>
        <div class="referral-stat-item">
            <div class="referral-stat-number" id="referralBalance">0</div>
            <div class="referral-stat-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
        </div>
    </div>
</div>
</div>

<!-- TASKS -->
<div id="tasksPage" class="hidden">
<div class="tasks-container">
    
    <div class="tasks-section-title">ğŸ“± ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰</div>
    <div class="social-links-grid" id="socialLinksGrid"></div>
    
    <div class="tasks-section-title">ğŸ“„ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</div>
    <div class="posts-grid" id="postsGrid"></div>
    
</div>
</div>

</div>

<!-- NAV -->
<div class="bottom-nav">
<div class="nav-item active" onclick="showPage('home', event)">
    ğŸ 
    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
</div>
<div class="nav-item" onclick="showPage('tasks', event)">
    ğŸ“‹
    <span>Ø§Ù„Ù…Ù‡Ø§Ù…</span>
</div>
<div class="nav-item" onclick="showPage('profile', event)">
    ğŸ‘¤
    <span>Ø§Ù„Ù…Ù„Ù</span>
</div>
<div class="nav-item" onclick="showPage('referral', event)">
    â†—ï¸
    <span>Ø§Ù„Ø¯Ø¹ÙˆØ©</span>
</div>
</div>

<div class="toast" id="toast"></div>

</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
if(window.Telegram.WebApp){
Telegram.WebApp.expand();
Telegram.WebApp.disableVerticalSwipes();
}

const DAILY_LIMIT = 5;
const VOTE_REWARD = 10;
const REFERRAL_REWARD = 5;
const SOCIAL_TASK_REWARD = 5;

// Ù…ØªØºÙŠØ±Ø§Øª ØªØ®Ø²ÙŠÙ† Ù…Ø¤Ù‚Øª Ù„Ù„Ø¹Ù…Ù„Ø§Øª
let cachedCoins = [];
let isFetchingCoins = false;
let lastFetchTime = 0;
const CACHE_DURATION = 60000; // Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©

function playSound() {
    try {
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        oscillator.type = 'sine';
        oscillator.frequency.setValueAtTime(800, audioCtx.currentTime);
        gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        oscillator.start();
        oscillator.stop(audioCtx.currentTime + 0.2);
    } catch (e) {
        console.log("Audio not supported or blocked.");
    }
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù Ù…Ø³ØªØ®Ø¯Ù… Ø«Ø§Ø¨Øª
function getOrCreateUserId() {
    let userId = localStorage.getItem("oclin_user_id");
    if (!userId) {
        userId = "user_" + Math.random().toString(36).substr(2, 9);
        localStorage.setItem("oclin_user_id", userId);
    }
    return userId;
}

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function loadUserData() {
    const userId = getOrCreateUserId();
    const savedData = localStorage.getItem("oclin_user_" + userId);
    
    if (savedData) {
        return JSON.parse(savedData);
    } else {
        // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯Ø©
        return {
            id: userId,
            balance: 0,
            dailyVotes: 0,
            votedCoins: {},
            referralBalance: 0,
            referralsCount: 0,
            hasReceivedReferralReward: false,
            lastVoteDate: new Date().toDateString(),
            completedTasks: {},
            joinedAt: new Date().toISOString()
        };
    }
}

// Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function saveUserData() {
    localStorage.setItem("oclin_user_" + userData.id, JSON.stringify(userData));
}

let userData = loadUserData();

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØµÙˆÙŠØªØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
function checkAndResetDailyVotes() {
    const today = new Date().toDateString();
    if (userData.lastVoteDate !== today) {
        userData.dailyVotes = 0;
        userData.votedCoins = {};
        userData.lastVoteDate = today;
        saveUserData();
    }
}

function checkForReferral() {
    const urlParams = new URLSearchParams(window.location.search);
    const referrerId = urlParams.get('start');

    if (referrerId && referrerId !== userData.id) { // Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø¯Ø§Ø¹ÙŠ Ù„ÙŠØ³ Ù†ÙØ³Ù‡
        const isNewUser = !localStorage.getItem("oclin_user_" + userData.id);
        
        if (isNewUser && !userData.hasReceivedReferralReward) {
            giveReferralReward(referrerId);
            userData.hasReceivedReferralReward = true;
            document.getElementById('splashMessage').innerText = 'ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹! ØªÙ… ØªÙØ¹ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­';
            saveUserData();
            playSound();
        } else {
            document.getElementById('splashMessage').innerText = 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ!';
            if (!userData.hasOwnProperty('hasReceivedReferralReward')) {
                userData.hasReceivedReferralReward = true;
                saveUserData();
            }
        }
    } else {
        document.getElementById('splashMessage').innerText = 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!';
    }
}

function giveReferralReward(referrerId) {
    let referrerData = JSON.parse(localStorage.getItem("oclin_user_" + referrerId));
    
    if (referrerData) {
        referrerData.referralBalance = (referrerData.referralBalance || 0) + REFERRAL_REWARD;
        referrerData.referralsCount = (referrerData.referralsCount || 0) + 1;
        localStorage.setItem("oclin_user_" + referrerId, JSON.stringify(referrerData));
    }
}

let selectedIndex = -1;
const coinsGrid = document.getElementById("coinsGrid");
let voteContainers = [];

// ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØµÙˆÙŠØªØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
function updateVotesCounter() {
    const remainingVotes = DAILY_LIMIT - userData.dailyVotes;
    const counterElement = document.querySelector('#votesCounter');
    if (counterElement) {
        counterElement.textContent = `(${remainingVotes}/${DAILY_LIMIT})`;
    }
}

// Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø£Ø´Ù‡Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø¹Ù„Ù‰ Solana
const POPULAR_SOLANA_TOKENS = [
    "So11111111111111111111111111111111111111112", // Wrapped SOL
    "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v", // USDC
    "Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB", // USDT
    "DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263", // BONK
    "7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU", // SAMO
    "mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So", // mSOL
    "J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn", // JitoSOL
    "bSo13r4TkiE4KumL71LsHTPpL2euBYLFx6h9HP3piy1", // bSOL
    "9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E", // wBTC
    "2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk", // wETH
    "SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt", // SRM
    "9X8BzCjCtW1wR5r5n5X5X5X5X5X5X5X5X5X5X5X5X5", // FIDA
    "7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs", // ETH (Wormhole)
    "A9mUU4qviSctgLPK7h7yqA8Fp4E7iWzQm9dKJp8LQvM", // BTC (Wormhole)
    "HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p" // LDO
];

async function fetchCoins(forceRefresh = false) {
    if (isFetchingCoins) return;
    
    if (!forceRefresh && cachedCoins.length > 0 && (Date.now() - lastFetchTime) < CACHE_DURATION) {
        displayCoins(cachedCoins);
        return;
    }
    
    try {
        isFetchingCoins = true;
        coinsGrid.innerHTML = '<p style="color:white;text-align:center;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¹Ù…Ù„Ø§Øª Solana Ø§Ù„Ù…ØªÙ†ÙˆØ¹Ø©...</p>';
        
        const uniqueCoins = new Map();
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø´Ù‡ÙˆØ±Ø©
        for (const tokenAddress of POPULAR_SOLANA_TOKENS) {
            try {
                const res = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${tokenAddress}`);
                if (res.ok) {
                    const data = await res.json();
                    if (data.pairs && data.pairs.length > 0) {
                        const pair = data.pairs[0];
                        if (!uniqueCoins.has(pair.baseToken.address)) {
                            uniqueCoins.set(pair.baseToken.address, {
                                id: pair.baseToken.address,
                                name: pair.baseToken.name,
                                symbol: pair.baseToken.symbol,
                                image: pair.info?.imageUrl || `https://via.placeholder.com/45?text=${pair.baseToken.symbol}`,
                                current_price: pair.priceUsd || 0,
                                volume24h: pair.volume?.h24 || 0
                            });
                        }
                    }
                }
            } catch (e) {
                console.log(`Error fetching token ${tokenAddress}:`, e);
            }
        }
        
        // Ø¥Ø°Ø§ Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø¬Ù„Ø¨ Ø£ÙŠ Ø¹Ù…Ù„Ø©ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø©
        if (uniqueCoins.size === 0) {
            const mockCoins = [
                { name: "Solana", symbol: "SOL", address: "So11111111111111111111111111111111111111112", price: 98.5 },
                { name: "Bonk", symbol: "BONK", address: "DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263", price: 0.0000234 },
                { name: "Jito", symbol: "JTO", address: "jto1", price: 2.34 },
                { name: "Raydium", symbol: "RAY", address: "ray1", price: 1.23 },
                { name: "Orca", symbol: "ORCA", address: "orca1", price: 3.45 },
                { name: "Samoyedcoin", symbol: "SAMO", address: "7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU", price: 0.00567 },
                { name: "Marinade", symbol: "mSOL", address: "mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So", price: 112.3 },
                { name: "Wrapped Bitcoin", symbol: "WBTC", address: "9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E", price: 62345.67 },
                { name: "Wrapped Ethereum", symbol: "WETH", address: "2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk", price: 3456.78 },
                { name: "USD Coin", symbol: "USDC", address: "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v", price: 1.00 },
                { name: "Serum", symbol: "SRM", address: "SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt", price: 0.45 },
                { name: "Bonfida", symbol: "FIDA", address: "9X8BzCjCtW1wR5r5n5X5X5X5X5X5X5X5X5X5X5X5X5", price: 0.32 },
                { name: "Lido DAO", symbol: "LDO", address: "HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p", price: 2.15 },
                { name: "Star Atlas", symbol: "ATLAS", address: "atlas1", price: 0.0023 },
                { name: "Genopets", symbol: "GENE", address: "gene1", price: 0.45 },
                { name: "Step Finance", symbol: "STEP", address: "step1", price: 0.12 },
                { name: "Port Finance", symbol: "PORT", address: "port1", price: 0.08 },
                { name: "Media Network", symbol: "MEDIA", address: "media1", price: 12.5 },
                { name: "Synthetify", symbol: "SNY", address: "sny1", price: 0.03 },
                { name: "Mercurial", symbol: "MER", address: "mer1", price: 0.15 },
                { name: "Oxygen", symbol: "OXY", address: "oxy1", price: 0.07 },
                { name: "Maps.me", symbol: "MAPS", address: "maps1", price: 0.02 },
                { name: "Solend", symbol: "SLND", address: "slnd1", price: 0.55 },
                { name: "Saber", symbol: "SBR", address: "sbr1", price: 0.0012 },
                { name: "PsyOptions", symbol: "PSY", address: "psy1", price: 0.008 },
                { name: "Cope", symbol: "COPE", address: "cope1", price: 0.002 },
                { name: "Solrise", symbol: "SLRS", address: "slrs1", price: 0.0015 },
                { name: "Parrot", symbol: "PRT", address: "prt1", price: 0.0003 },
                { name: "Aleph.im", symbol: "ALEPH", address: "aleph1", price: 0.18 },
                { name: "Akash Network", symbol: "AKT", address: "akt1", price: 2.34 }
            ];
            
            mockCoins.forEach(coin => {
                uniqueCoins.set(coin.address, {
                    id: coin.address,
                    name: coin.name,
                    symbol: coin.symbol,
                    image: `https://via.placeholder.com/45?text=${coin.symbol}`,
                    current_price: coin.price
                });
            });
        }
        
        const formattedCoins = Array.from(uniqueCoins.values()).slice(0, 30);
        cachedCoins = formattedCoins;
        lastFetchTime = Date.now();
        displayCoins(formattedCoins);
        
    } catch (error) {
        console.error("Error fetching coins:", error);
        
        if (cachedCoins.length > 0) {
            displayCoins(cachedCoins);
            showToast("Ø¬Ø§Ø±ÙŠ Ø¹Ø±Ø¶ Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©");
        } else {
            coinsGrid.innerHTML = '<p style="color:white;text-align:center;">âš ï¸ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p>';
        }
    } finally {
        isFetchingCoins = false;
    }
}

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
setInterval(() => {
    if (document.getElementById('homePage').classList.contains('hidden') === false) {
        fetchCoins(true);
    }
}, 60000);

function displayCoins(coins) {
    if (!coins || coins.length === 0) {
        coinsGrid.innerHTML = '<p style="color:white;text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Øª Ù…ØªØ§Ø­Ø©</p>';
        return;
    }
    
    coinsGrid.innerHTML = "";
    voteContainers = [];
    const hasVotesLeft = userData.dailyVotes < DAILY_LIMIT;
    
    coins.forEach((coin, i) => {
        const container = document.createElement("div");
        container.className = "coin-vote-container";
        container.dataset.index = i;
        
        const coinCard = document.createElement("div");
        coinCard.className = "coin-card";
        
        if (userData.votedCoins && userData.votedCoins[i]) {
            coinCard.classList.add("voted");
        } else if (!hasVotesLeft) {
            coinCard.classList.add("disabled");
        }

        coinCard.innerHTML = `
            <div class="coin-icon"><img src="${coin.image}" alt="${coin.name}" onerror="this.src='https://via.placeholder.com/45?text=${coin.symbol}'"></div>
            <div>
                <div class="coin-name">${coin.name}</div>
                <div class="coin-symbol">${coin.symbol.toUpperCase()}</div>
                ${coin.current_price ? `<div class="coin-symbol" style="color:#2ecc71;">$${parseFloat(coin.current_price).toFixed(4)}</div>` : ''}
            </div>`;

        const voteOptions = document.createElement("div");
        voteOptions.className = "vote-options";
        voteOptions.innerHTML = `
            <div class="vote-btn vote-up ${!hasVotesLeft ? 'disabled' : ''}" onclick="castVote(${i}, 'up')">â¬†ï¸ Up</div>
            <div class="vote-btn vote-down ${!hasVotesLeft ? 'disabled' : ''}" onclick="castVote(${i}, 'down')">â¬‡ï¸ Down</div>
        `;

        container.appendChild(coinCard);
        container.appendChild(voteOptions);
        
        if (hasVotesLeft && !userData.votedCoins?.[i]) {
            coinCard.onclick = (e) => {
                e.stopPropagation();
                selectCoin(i, container);
            };
        }
        
        coinsGrid.appendChild(container);
        voteContainers.push(container);
    });
}

function selectCoin(index, container) {
    if (userData.dailyVotes >= DAILY_LIMIT) {
        showToast("Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ°Øª Ø­Ø¯ Ø§Ù„ØªØµÙˆÙŠØª Ø§Ù„ÙŠÙˆÙ…ÙŠ");
        return;
    }
    
    if (selectedIndex === index) {
        voteContainers.forEach(c => {
            c.classList.remove("selected");
            const voteOpts = c.querySelector('.vote-options');
            if (voteOpts) voteOpts.classList.remove('show');
        });
        selectedIndex = -1;
        return;
    }
    
    if (userData.votedCoins && userData.votedCoins[index]) {
        showToast("Ù„Ù‚Ø¯ ØµÙˆØªØª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹");
        return;
    }
    
    voteContainers.forEach(c => {
        c.classList.remove("selected");
        const voteOpts = c.querySelector('.vote-options');
        if (voteOpts) voteOpts.classList.remove('show');
    });
    
    container.classList.add("selected");
    const voteOptions = container.querySelector('.vote-options');
    if (voteOptions) voteOptions.classList.add('show');
    
    selectedIndex = index;
}

function castVote(index, voteType) {
    if (selectedIndex !== index) {
        showToast("Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹");
        return;
    }
    
    if (userData.dailyVotes >= DAILY_LIMIT) {
        showToast("Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ°Øª Ø­Ø¯ Ø§Ù„ØªØµÙˆÙŠØª Ø§Ù„ÙŠÙˆÙ…ÙŠ");
        return;
    }
    
    if (userData.votedCoins && userData.votedCoins[index]) {
        showToast("Ù„Ù‚Ø¯ ØµÙˆØªØª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹");
        return;
    }
    
    userData.balance += VOTE_REWARD;
    userData.dailyVotes++;
    
    if (!userData.votedCoins) {
        userData.votedCoins = {};
    }
    userData.votedCoins[index] = true;
    
    saveUserData();
    
    document.getElementById("profileBalance").innerText = userData.balance;
    updateVotesCounter();
    showToast(`âœ… ØªÙ… Ø§Ù„ØªØµÙˆÙŠØª Ø¨Ù†Ø¬Ø§Ø­! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${VOTE_REWARD} Ù†Ù‚Ø§Ø·`);
    
    if (voteContainers[index]) {
        voteContainers[index].classList.remove("selected");
        const voteOpts = voteContainers[index].querySelector('.vote-options');
        if (voteOpts) voteOpts.classList.remove('show');
    }
    
    const coinCard = voteContainers[index]?.querySelector('.coin-card');
    if (coinCard) coinCard.classList.add('voted');
    
    selectedIndex = -1;
    
    if (userData.dailyVotes >= DAILY_LIMIT) {
        setTimeout(() => {
            displayCoins(cachedCoins);
        }, 500);
    }
}

// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª
const socialLinks = [
    { platform: 'youtube', name: 'ÙŠÙˆØªÙŠÙˆØ¨', username: '@oclin_official', icon: 'ğŸ“º', url: 'https://youtube.com/@oclin', reward: 5 },
    { platform: 'telegram', name: 'ØªÙ„ÙŠÙƒØ±Ø§Ù…', username: '@oclin_channel', icon: 'ğŸ“±', url: 'https://t.me/oclin_channel', reward: 5 },
    { platform: 'x', name: 'X (Twitter)', username: '@oclin', icon: 'ğŸ¦', url: 'https://x.com/oclin', reward: 5 },
    { platform: 'instagram', name: 'Ø§Ù†Ø³ØªØºØ±Ø§Ù…', username: '@oclin', icon: 'ğŸ“·', url: 'https://instagram.com/oclin', reward: 5 },
    { platform: 'tiktok', name: 'ØªÙŠÙƒ ØªÙˆÙƒ', username: '@oclin', icon: 'ğŸµ', url: 'https://tiktok.com/@oclin', reward: 5 }
];

const samplePosts = [
    { platform: 'ÙŠÙˆØªÙŠÙˆØ¨', username: '@oclin', content: 'ğŸš€ Ø´Ø±Ø­ Ø¬Ø¯ÙŠØ¯: ÙƒÙŠÙ ØªØ±Ø¨Ø­ Ù…Ù† Ø§Ù„ØªØµÙˆÙŠØª Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø§Øª! Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¢Ù†', time: 'Ù…Ù†Ø° Ø³Ø§Ø¹Ø©', avatar: 'ğŸ“º' },
    { platform: 'ØªÙ„ÙŠÙƒØ±Ø§Ù…', username: '@oclin', content: 'ğŸª™ ØªÙ… Ø¥Ø¶Ø§ÙØ© 5 Ø¹Ù…Ù„Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„ØªØµÙˆÙŠØª! Ø§Ø¯Ø®Ù„ ÙˆØµÙˆØª Ø§Ù„Ø¢Ù†', time: 'Ù…Ù†Ø° 3 Ø³Ø§Ø¹Ø§Øª', avatar: 'ğŸ“±' },
    { platform: 'X', username: '@oclin', content: 'ğŸ”¥ Ù…Ø³Ø§Ø¨Ù‚Ø© ÙƒØ¨Ø±Ù‰! 1000 Ù†Ù‚Ø·Ø© Ù„Ù„ÙØ§Ø¦Ø²ÙŠÙ† Ø§Ù„Ø®Ù…Ø³Ø© Ø§Ù„Ø£ÙˆØ§Ø¦Ù„', time: 'Ù…Ù†Ø° 5 Ø³Ø§Ø¹Ø§Øª', avatar: 'ğŸ¦' },
    { platform: 'Ø§Ù†Ø³ØªØºØ±Ø§Ù…', username: '@oclin', content: 'ğŸ“¸ ØµÙˆØ± Ø­ØµØ±ÙŠØ© Ù…Ù† Ù„Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ù…Ø¹ ÙØ±ÙŠÙ‚ OCLIN', time: 'Ù…Ù†Ø° ÙŠÙˆÙ…', avatar: 'ğŸ“·' },
    { platform: 'ØªÙŠÙƒ ØªÙˆÙƒ', username: '@oclin', content: 'ğŸ¬ ÙƒÙŠÙ ØªØµØ¨Ø­ Ù…Ù„ÙŠÙˆÙ†ÙŠØ± Ø¨Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©ØŸ #crypto #solana', time: 'Ù…Ù†Ø° ÙŠÙˆÙ…ÙŠÙ†', avatar: 'ğŸµ' }
];

function initTasksPage() {
    const socialGrid = document.getElementById('socialLinksGrid');
    socialGrid.innerHTML = '';
    
    socialLinks.forEach(link => {
        const card = document.createElement('div');
        card.className = `social-link-card ${userData.completedTasks?.[link.platform] ? 'completed' : ''}`;
        card.innerHTML = `
            <div class="social-icon">${link.icon}</div>
            <div class="social-name">${link.name}</div>
            <div class="social-username">${link.username}</div>
            <div class="social-reward">+${link.reward} Ù†Ù‚Ø§Ø·</div>
        `;
        card.onclick = () => completeSocialTask(link);
        socialGrid.appendChild(card);
    });
    
    const postsGrid = document.getElementById('postsGrid');
    postsGrid.innerHTML = '';
    
    samplePosts.forEach((post, index) => {
        const postDiv = document.createElement('div');
        postDiv.className = 'post-card';
        postDiv.innerHTML = `
            <div class="post-header">
                <div class="post-avatar">${post.avatar}</div>
                <div class="post-info">
                    <div class="post-platform">${post.platform}</div>
                    <div class="post-time">${post.time}</div>
                </div>
            </div>
            <div class="post-content">${post.content}</div>
            <div class="post-actions">
                <button class="post-action-btn ${userData.completedTasks?.['post_' + index] ? 'completed' : ''}" onclick="likePost(${index})">
                    ${userData.completedTasks?.['post_' + index] ? 'âœ… ØªÙ… Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨' : 'ğŸ‘ Ø¥Ø¹Ø¬Ø§Ø¨ +5'}
                </button>
            </div>
        `;
        postsGrid.appendChild(postDiv);
    });
}

function completeSocialTask(link) {
    if (!userData.completedTasks) userData.completedTasks = {};
    
    if (userData.completedTasks[link.platform]) {
        showToast('Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹');
        return;
    }
    
    // ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·
    window.open(link.url, '_blank');
    
    // Ù…Ù†Ø­ Ø§Ù„Ù†Ù‚Ø§Ø·
    userData.balance += link.reward;
    userData.completedTasks[link.platform] = true;
    saveUserData();
    
    document.getElementById("profileBalance").innerText = userData.balance;
    showToast(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${link.reward} Ù†Ù‚Ø§Ø· Ù„Ù…ØªØ§Ø¨Ø¹Ø© ${link.name}`);
    
    initTasksPage(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¸Ù‡Ø±
}

function likePost(index) {
    if (!userData.completedTasks) userData.completedTasks = {};
    
    if (userData.completedTasks['post_' + index]) {
        showToast('Ù„Ù‚Ø¯ Ø£Ø¹Ø¬Ø¨Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ù…Ø³Ø¨Ù‚Ø§Ù‹');
        return;
    }
    
    userData.balance += 5;
    userData.completedTasks['post_' + index] = true;
    saveUserData();
    
    document.getElementById("profileBalance").innerText = userData.balance;
    showToast('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© 5 Ù†Ù‚Ø§Ø·! Ø´ÙƒØ±Ø§Ù‹ Ù„Ù„Ø¥Ø¹Ø¬Ø§Ø¨');
    
    initTasksPage(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
}

function showPage(page, event) {
    if (event) {
        document.querySelectorAll(".nav-item").forEach(n => n.classList.remove("active"));
        event.currentTarget.classList.add("active");
    }

    document.getElementById("homePage").classList.add("hidden");
    document.getElementById("profilePage").classList.add("hidden");
    document.getElementById("referralPage").classList.add("hidden");
    document.getElementById("tasksPage").classList.add("hidden");

    document.getElementById(page + "Page").classList.remove("hidden");
    
    if (page === 'referral') {
        updateReferralDisplay();
    } else if (page === 'home') {
        checkAndResetDailyVotes();
        updateVotesCounter();
        selectedIndex = -1;
        if (cachedCoins.length > 0) {
            displayCoins(cachedCoins);
        } else {
            fetchCoins();
        }
    } else if (page === 'tasks') {
        initTasksPage();
    } else if (page === 'profile') {
        document.getElementById("profileBalance").innerText = userData.balance;
        document.getElementById("profileDisplayName").innerText = "OCLIN User";
        document.getElementById("profileUsername").innerText = "@user_" + userData.id.substr(0, 8);
    }
}

function showToast(msg) {
    const t = document.getElementById("toast");
    t.innerText = msg;
    t.classList.add("show");
    setTimeout(() => t.classList.remove("show"), 2000);
}

function copyReferralLink() {
    const linkInput = document.getElementById("referralLink");
    linkInput.select();
    linkInput.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(linkInput.value).then(() => {
        showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!");
    }).catch(err => {
        showToast("ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®");
    });
}

function updateReferralDisplay() {
    const botUsername = "oclin_vote_bot";
    document.getElementById("referralLink").value = "https://t.me/" + botUsername + "?start=" + userData.id;
    document.getElementById("referralBalance").innerText = userData.referralBalance || 0;
    document.getElementById("totalReferrals").innerText = userData.referralsCount || 0;
}

function init() {
    checkAndResetDailyVotes();
    checkForReferral();
    
    document.getElementById("profileBalance").innerText = userData.balance;
    updateVotesCounter();
    updateReferralDisplay();
    
    fetchCoins();
    
    setTimeout(() => {
        document.getElementById('splashScreen').classList.add('hidden');
    }, 2000);
}

document.addEventListener("DOMContentLoaded", init);

</script>

</body>
</html>
