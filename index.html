<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Oclon.bot ‚Ä¢ Final Design</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:'Tajawal', sans-serif;}
body{min-height:100vh;display:flex;justify-content:center;align-items:center;background:#0a0e17;padding:10px;}
.app{width:380px;height:700px;background:linear-gradient(180deg,#12182b 0%,#1a2340 100%);border-radius:40px;padding:20px 16px;position:relative;display:flex;flex-direction:column;border:1px solid rgba(255,255,255,0.05);box-shadow:0 25px 50px -8px rgba(0,0,0,0.6);overflow:hidden;}
.header{display:flex;justify-content:center;align-items:center;padding:10px 0;flex-shrink:0;}
.title{font-size:28px;font-weight:800;background:linear-gradient(135deg,#ffffff,#b886ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:1px;}
.main-content{flex:1;overflow-y:auto;padding:5px 0 15px 0;scrollbar-width:none;-ms-overflow-style:none;}
.main-content::-webkit-scrollbar{display:none;}
.welcome-message{text-align:center;color:#a5b3d9;font-size:14px;margin:10px 0 20px 0;padding:10px;background:rgba(255,255,255,0.02);border-radius:50px;}
.coins-title{color:white;font-size:18px;font-weight:700;margin-bottom:15px;display:flex;align-items:center;gap:8px;}
.coins-grid{display:flex;flex-direction:column;gap:12px;max-height:500px;overflow-y:auto;padding:5px;scrollbar-width:none;-ms-overflow-style:none;}
.coins-grid::-webkit-scrollbar{display:none;}
.coin-card{background:rgba(255,255,255,0.03);border-radius:25px;padding:18px;display:flex;align-items:center;gap:15px;cursor:pointer;transition:all 0.3s ease;border:2px solid transparent;position:relative;}
.coin-card.selected{border-color:#ffd966;background:rgba(255,215,0,0.1);transform:scale(1.02);box-shadow:0 0 20px rgba(255,215,0,0.2);}
.coin-card.voted{opacity:0.7;border-color:#4b6eff;background:rgba(75,110,255,0.1);cursor:not-allowed;}
.coin-card.voted::after{content:"‚è≥ 24h";position:absolute;left:15px;top:50%;transform:translateY(-50%);background:#4b6eff;color:white;padding:5px 12px;border-radius:50px;font-size:12px;font-weight:700;}
.coin-icon{width:55px;height:55px;background:linear-gradient(145deg,#4b6eff,#9d4eff);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:26px;font-weight:bold;flex-shrink:0;border:2px solid rgba(255,255,255,0.1);}
.coin-details{flex:1;}
.coin-name{font-weight:700;color:white;font-size:18px;}
.coin-symbol{color:#a5b3d9;font-size:14px;margin-top:4px;}
.vote-options{display:flex;justify-content:center;gap:20px;margin:20px 0;opacity:0;transform:translateY(-10px);transition:all 0.3s ease;height:0;overflow:hidden;pointer-events:none;}
.vote-options.show{opacity:1;transform:translateY(0);height:auto;overflow:visible;pointer-events:all;}
.vote-btn{width:120px;padding:15px 0;border-radius:50px;display:flex;align-items:center;justify-content:center;gap:8px;font-weight:700;font-size:18px;cursor:pointer;transition:all 0.2s;border:2px solid;background:rgba(10,15,30,0.9);}
.vote-up{border-color:#2ecc71;color:#2ecc71;box-shadow:0 5px 0 #1a5a38;}
.vote-down{border-color:#e74c3c;color:#e74c3c;box-shadow:0 5px 0 #7e2a2a;}
.vote-btn:active{transform:translateY(5px);box-shadow:none;}
.vote-btn.disabled{opacity:0.5;pointer-events:none;}
.referral-container{background:rgba(255,255,255,0.03);border-radius:30px;padding:20px;border:1px solid rgba(255,215,0,0.1);}
.referral-header{display:flex;align-items:center;gap:8px;color:white;font-size:18px;font-weight:700;margin-bottom:15px;}
.referral-desc{color:#a5b3d9;font-size:14px;margin-bottom:15px;line-height:1.5;}
.referral-box{display:flex;align-items:center;background:rgba(0,0,0,0.3);border-radius:50px;padding:5px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.1);}
#referralLink{flex:1;padding:12px 15px;background:transparent;border:none;color:#ffd966;font-size:13px;direction:ltr;text-align:left;outline:none;}
.copy-btn{background:#4b6eff;border:none;color:white;padding:10px 20px;border-radius:50px;font-weight:700;cursor:pointer;font-size:14px;transition:all 0.2s;}
.copy-btn:active{transform:scale(0.95);}
.referral-stats{display:flex;justify-content:space-around;background:rgba(0,0,0,0.2);border-radius:20px;padding:15px;}
.stat-item{text-align:center;}
.stat-number{font-size:28px;font-weight:800;color:#ffd966;}
.stat-label{color:#a5b3d9;font-size:13px;margin-top:5px;}
.profile-card{background:rgba(255,255,255,0.03);border-radius:30px;padding:25px;border:1px solid rgba(255,215,0,0.15);}
.profile-header{display:flex;align-items:center;gap:20px;margin-bottom:25px;}
.profile-avatar{width:70px;height:70px;background:linear-gradient(145deg,#4b6eff,#9d4eff);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:35px;border:3px solid #ffd966;}
.profile-username-box{flex:1;background:rgba(0,0,0,0.3);padding:12px 18px;border-radius:50px;border:1px solid rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:space-between;}
#profileUsername{font-size:18px;font-weight:700;color:white;background:transparent;border:none;outline:none;width:140px;}
.edit-icon{color:#ffd966;cursor:pointer;font-size:18px;}
.profile-balance{background:rgba(0,0,0,0.2);border-radius:20px;padding:20px;display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;}
.balance-label{color:#a5b3d9;font-size:16px;}
.balance-value{display:flex;align-items:center;gap:8px;}
.balance-value span{font-size:32px;font-weight:800;color:#ffd966;}
.wallet-btn{background:linear-gradient(145deg,#4b6eff,#364fc7);border:none;color:white;padding:15px;border-radius:50px;font-weight:700;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;width:100%;border:1px solid rgba(255,255,255,0.2);box-shadow:0 5px 0 #1e2b5c;transition:all 0.2s;}
.wallet-btn:active{transform:translateY(5px);box-shadow:none;}
.bottom-nav{display:flex;justify-content:center;align-items:center;gap:50px;background:rgba(10,15,25,0.95);backdrop-filter:blur(20px);border-radius:50px;padding:12px 25px;margin-top:10px;border:1px solid rgba(255,255,255,0.1);flex-shrink:0;}
.nav-item{display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:all 0.2s;color:#a5b3d9;}
.nav-item.active{color:#ffd966;transform:translateY(-3px);}
.nav-item span{font-size:26px;}
.nav-label{font-size:11px;font-weight:600;margin-top:2px;}
.toast{position:absolute;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:#2ecc71;color:white;padding:12px 30px;border-radius:50px;font-weight:700;z-index:1000;transition:all 0.3s;opacity:0;box-shadow:0 10px 30px rgba(46,204,113,0.4);}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1;}
.hidden-section{display:none;}
</style>
</head>
<body>

<div class="app">
<div class="header"><div class="title">OCLIN COIN</div></div>

<div class="main-content" id="mainContent">
<!-- Home Page -->
<div id="homePage">
<div class="welcome-message">üëã Select a coin to vote</div>
<div class="vote-options" id="voteOptions">
<div class="vote-btn vote-up" id="voteUpBtn" onclick="castVote('up')"><span>‚¨ÜÔ∏è</span> Up</div>
<div class="vote-btn vote-down" id="voteDownBtn" onclick="castVote('down')"><span>‚¨áÔ∏è</span> Down</div>
</div>
<div class="coins-title"><span>üìä</span> Available Coins</div>
<div class="coins-grid" id="coinsGrid"></div>
</div>

<!-- Profile Page -->
<div id="profilePage" class="hidden-section">
<div class="profile-card">
<div class="profile-header">
<div class="profile-avatar">üë§</div>
<div class="profile-username-box">
<input type="text" id="profileUsername" value="Random User">
<span class="edit-icon" onclick="editProfileUsername()">‚úèÔ∏è</span>
</div></div>
<div class="profile-balance">
<span class="balance-label">üí∞ Balance</span>
<div class="balance-value"><span id="profileBalance">1250</span><span style="color:#ffd966;">USD</span></div>
</div>
<button class="wallet-btn" onclick="connectWallet()"><span>üîó</span> Connect Wallet</button>
<button class="wallet-btn" style="margin-top:10px;" onclick="withdrawBalance()"><span>üí∏</span> Withdraw</button>
</div>
</div>

<!-- Referral Page -->
<div id="referralPage" class="hidden-section">
<div class="referral-container">
<div class="referral-header"><span>ü§ù</span> Invite Friends</div>
<p class="referral-desc">Get 5 points for each friend who signs up with your link.</p>
<div class="referral-box">
<input type="text" id="referralLink" value="https://deva.coin/ref/x7f9k2m" readonly>
<button class="copy-btn" onclick="copyReferral()">Copy</button>
</div>
<div class="referral-stats">
<div class="stat-item"><div class="stat-number" id="referralCount">7</div><div class="stat-label">Friends</div></div>
<div class="stat-item"><div class="stat-number" id="referralPoints">35</div><div class="stat-label">Points</div></div>
</div>
</div>
</div>
</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
<div class="nav-item active" onclick="showPage('home')"><span>üè†</span><div class="nav-label">Home</div></div>
<div class="nav-item" onclick="showPage('profile')"><span>üë§</span><div class="nav-label">Profile</div></div>
<div class="nav-item" onclick="showPage('referral')"><span>‚ÜóÔ∏è</span><div class="nav-label">Referral</div></div>
</div>

<div class="toast" id="toast"></div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
<script>
// System Settings
const DAILY_LIMIT=5; const VOTE_REWARD=10; const REFERRAL_REWARD=15;
function generateUserId(){return'user_'+Math.random().toString(36).substring(2,10);}
let savedUser=localStorage.getItem("oclin_user");
let userData=savedUser?JSON.parse(savedUser):{id:generateUserId(),balance:0,username:'Random User',walletConnected:false,referrals:0,referralPoints:0,votedCoins:{},dailyVotes:0,lastVoteDate:null};
saveUser();

let coins=[];let selectedCoinIndex=-1;
let voteOptions=document.getElementById('voteOptions'); let coinsGrid=document.getElementById('coinsGrid');

async function fetchCoins(){const response=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=20&page=1");const data=await response.json();coins=data.map(c=>({id:c.id,name:c.name,symbol:c.symbol.toUpperCase(),icon:c.image}));displayCoins();}
function displayCoins(){coinsGrid.innerHTML='';coins.forEach((coin,index)=>{const coinCard=document.createElement('div');coinCard.className='coin-card';coinCard.id=`coin-${index}`;coinCard.onclick=()=>selectCoin(index);if(userData.votedCoins[index]){coinCard.classList.add('voted');}coinCard.innerHTML=`<div class="coin-icon"><img src="${coin.icon}" style="width:100%;height:100%;border-radius:50%;"></div><div class="coin-details"><div class="coin-name">${coin.name}</div><div class="coin-symbol">${coin.symbol}</div></div>`;coinsGrid.appendChild(coinCard);});}
function checkDailyReset(){const today=new Date().toDateString();if(userData.lastVoteDate!==today){userData.dailyVotes=0;userData.lastVoteDate=today;saveUser();}}
function selectCoin(index){if(userData.votedCoins[index]){showToast("‚ùå Already voted");return;}checkDailyReset();if(userData.dailyVotes>=DAILY_LIMIT){showToast("üö´ Daily limit reached");return;}document.querySelectorAll('.coin-card').forEach(c=>c.classList.remove('selected'));document.getElementById(`coin-${index}`).classList.add('selected');selectedCoinIndex=index;voteOptions.classList.add('show');}
function castVote(type){if(selectedCoinIndex===-1)return;checkDailyReset();if(userData.dailyVotes>=DAILY_LIMIT){showToast("üö´ Daily limit over");return;}if(userData.votedCoins[selectedCoinIndex]){showToast("‚ùå Cannot vote twice");return;}userData.votedCoins[selectedCoinIndex]=true;userData.dailyVotes+=1;userData.balance+=VOTE_REWARD;saveUser();updateUI();document.getElementById(`coin-${selectedCoinIndex}`).classList.add('voted');voteOptions.classList.remove('show');selectedCoinIndex=-1;showToast(`‚úÖ You earned ${VOTE_REWARD} points`);}
function generateReferralLink(){return`${window.location.origin}${window.location.pathname}?ref=${userData.id}`;}
function checkReferral(){const params=new URLSearchParams(window.location.search);const refId=params.get("ref");if(refId && refId!==userData.id){userData.balance+=REFERRAL_REWARD;userData.referrals+=1;userData.referralPoints+=REFERRAL_REWARD;saveUser();updateUI();showToast(`üéÅ You earned ${REFERRAL_REWARD} points from referral`);}}
function saveUser(){localStorage.setItem("oclin_user",JSON.stringify(userData));}
function updateUI(){document.getElementById('profileBalance').textContent=userData.balance;document.getElementById('profileUsername').value=userData.username;document.getElementById('referralCount').textContent=userData.referrals;document.getElementById('referralPoints').textContent=userData.referralPoints;document.getElementById('referralLink').value=generateReferralLink();}
function copyReferral(){const link=document.getElementById('referralLink');link.select();document.execCommand('copy');showToast("üìã Link copied");}
function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>{t.classList.remove('show');},2000);}
function showPage(page){document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));event.currentTarget.classList.add('active');document.getElementById('homePage').style.display='none';document.getElementById('profilePage').style.display='none';document.getElementById('referralPage').style.display='none';document.getElementById(page+'Page').style.display='block';}

// Wallet Integration
let provider, signer, userAddress=null;
async function connectWallet(){if(typeof window.ethereum!=='undefined'){try{await window.ethereum.request({method:'eth_requestAccounts'});provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();userAddress=await signer.getAddress();userData.walletConnected=true;saveUser();updateUI();showToast(`üîó Connected: ${userAddress.substring(0,6)}...${userAddress.slice(-4)}`);}catch(err){console.error(err);showToast("‚ùå Wallet connection failed");}}else{showToast("‚ö†Ô∏è Wallet not found");}}
async function withdrawBalance(){if(!userData.walletConnected||!userAddress){showToast("‚ö†Ô∏è Connect wallet first");return;}const amount=userData.balance;if(amount<=0){showToast("‚ö†Ô∏è Balance is zero");return;}try{showToast(`üí∞ Sending ${amount} USD to your wallet`);userData.balance=0;saveUser();updateUI();}catch(err){console.error(err);showToast("‚ùå Withdraw failed");}}

// Edit Username
function editProfileUsername(){const val=document.getElementById('profileUsername').value;userData.username=val;saveUser();updateUI();showToast("‚úÖ Username updated");}

// Init
function init(){fetchCoins();checkReferral();updateUI();}
document.addEventListener('DOMContentLoaded',init);
</script>

</body>
</html>
